Work Item Type,Title,Priority,Iteration Path,Area Path,Tags,Step Action,Step Expected
Test Case,"Registrar Moto com Sensor vinculado (motoId=2001, sensorId=S-ESP32-001)",1,Mottu/Release-1/Sprint-1,Mottu/Backlog,Sistema;API;Moto;HappyPath,"1. Enviar POST /api/motos com JSON:
   {
     ""idMoto"": 2001,
     ""placa"": ""MTT1A23"",
     ""modelo"": ""CG 160"",
     ""idSensor"": ""S-ESP32-001"",
     ""status"": ""FORA_PATIO""
   }","- HTTP 201 Created
- Body com idMoto=2001, idSensor=""S-ESP32-001"", status=""FORA_PATIO""
- GET /api/motos/2001 retorna os mesmos dados"
Test Case,Consultar Moto por ID existente (2001),1,Mottu/Release-1/Sprint-1,Mottu/Backlog,Sistema;API;Moto;Consulta,1. Enviar GET /api/motos/2001,- HTTP 200 OK; Body com idMoto=2001 e dados cadastrados
Test Case,Atualizar status da Moto para EM_TRANSITO,2,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Moto;Atualizacao,"1. Enviar PUT /api/motos/2001/status com JSON:
   { ""status"": ""EM_TRANSITO"" }",- HTTP 200 OK; Body com status='EM_TRANSITO'
Test Case,Cadastrar Sensor IoT (S-ESP32-001),1,Mottu/Release-1/Sprint-1,Mottu/Backlog,Sistema;API;Sensor;HappyPath,"1. Enviar POST /api/sensores com JSON:
   {
     ""idSensor"": ""S-ESP32-001"",
     ""tipo"": ""ESP32"",
     ""protocolo"": ""LoRaWAN"",
     ""ativo"": true
   }",- HTTP 201 Created; Body com idSensor='S-ESP32-001' e ativo=true
Test Case,Erro ao cadastrar Sensor duplicado (S-ESP32-001),2,Mottu/Release-1/Sprint-1,Mottu/Backlog,Sistema;API;Sensor;Negativo;Duplicado,1. Enviar POST /api/sensores com idSensor já existente 'S-ESP32-001',- HTTP 409 Conflict (ou 400); mensagem de chave duplicada
Test Case,Registrar ENTRADA da moto no pátio (idMoto=2001),1,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Evento;Patio;HappyPath,"Pré-condição: Moto 2001 existente com status 'FORA_PATIO'.
1. Enviar POST /api/eventos com JSON:
   {
     ""idEvento"": 90001,
     ""idMoto"": 2001,
     ""tipo"": ""ENTRADA"",
     ""timestamp"": ""2025-11-05T10:00:00Z""
   }
2. Consultar GET /api/motos/2001","- HTTP 201 Created no POST
- Em GET subsequente, status da moto='NO_PATIO'"
Test Case,Registrar SAIDA da moto do pátio (idMoto=2001),1,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Evento;Patio;HappyPath,"Pré-condição: Moto 2001 existente e 'NO_PATIO'.
1. Enviar POST /api/eventos com JSON:
   {
     ""idEvento"": 90002,
     ""idMoto"": 2001,
     ""tipo"": ""SAIDA"",
     ""timestamp"": ""2025-11-05T10:30:00Z""
   }
2. Consultar GET /api/motos/2001","- HTTP 201 Created
- GET subsequente indica status='FORA_PATIO'"
Test Case,Consultar histórico de eventos da Moto (2001),3,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Evento;Consulta,1. Enviar GET /api/eventos?idMoto=2001&order=asc,- HTTP 200 OK; lista contendo 90001 (ENTRADA) e 90002 (SAIDA) em ordem cronológica
Test Case,Erro ao registrar ENTRADA com moto inexistente (idMoto=9999),2,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Evento;Negativo,"1. Enviar POST /api/eventos com JSON:
   {
     ""idEvento"": 90003,
     ""idMoto"": 9999,
     ""tipo"": ""ENTRADA"",
     ""timestamp"": ""2025-11-05T11:00:00Z""
   }",- HTTP 400/422; mensagem de referência de moto inexistente
Test Case,Erro ao consultar Moto inexistente (idMoto=9999),3,Mottu/Release-1/Sprint-1,Mottu/Backlog,Sistema;API;Moto;Negativo,1. Enviar GET /api/motos/9999,- HTTP 404 Not Found
Test Case,Desativar Sensor (ativo=false) e validar leitura bloqueada,2,Mottu/Release-1/Sprint-2,Mottu/Backlog,Sistema;API;Sensor;Fluxo,"1. Enviar PUT /api/sensores/S-ESP32-001 com JSON:
   { ""ativo"": false }
2. Tentar vincular este sensor a uma nova moto:
   POST /api/motos
   {
     ""idMoto"": 2002,
     ""placa"": ""MTT1B45"",
     ""modelo"": ""CG 160"",
     ""idSensor"": ""S-ESP32-001"",
     ""status"": ""FORA_PATIO""
   }",- HTTP 200 no PUT; POST subsequente rejeitado (HTTP 400/422) por sensor inativo
